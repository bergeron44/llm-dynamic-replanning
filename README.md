# ğŸ¤– LLM-Driven Dynamic Replanning Research Platform

## ğŸ¯ **××˜×¨×ª ×”×¤×¨×•×™×§×˜**

××¢×¨×›×ª ×¡×™××•×œ×¦×™×” ××ª×§×“××ª ×œ××—×§×¨ ×”×©×•×•××ª×™ ×©×œ **4 ××¨×›×™×˜×§×˜×•×¨×•×ª ×§×•×’× ×™×˜×™×‘×™×•×ª** ×©×•× ×•×ª ×œ×¡×•×›× ×™× ××•×˜×•× ×•××™×™×. ×”×¤×œ×˜×¤×•×¨××” ×‘×•×“×§×ª ×›×™×¦×“ ×¡×•×›× ×™× ×©×•× ×™× ××ª××•×“×“×™× ×¢× **×ª×’×œ×™×•×ª ×—×“×©×•×ª** ×‘××”×œ×š × ×™×•×•×˜ ×‘××‘×•×š, ×•××©×•×•×” ××ª ×”×‘×™×¦×•×¢×™× ×©×œ×”× ×‘××“×“×™× ××“×¢×™×™×.

## ğŸ”¬ **×”×©××œ×” ×”××—×§×¨×™×ª ×”××¨×›×–×™×ª**

**×”×× LLM ×™×›×•×œ ×œ×©××© ×›"××•×—" ××¡×˜×¨×˜×’×™ ×™×¢×™×œ ×©××—×œ×™×˜ ××ª×™ ×œ×”×¤×¢×™×œ ×ª×›× ×•×Ÿ ××—×“×© ×¢×œ ×‘×¡×™×¡ × ×ª×•× ×™× ×¤×¨×¡×¤×˜×•××œ×™×™× ×—×“×©×™×?**

## ğŸ§  **×”××œ×’×•×¨×™×ª××™× ×”× ×‘×“×§×™×**

| ××œ×’×•×¨×™×ª× | ×©× | ×ª×™××•×¨ | ×©×™××•×© ×‘-LLM |
|----------|-----|--------|-------------|
| **A** | ×¢×™×•×•×¨ (Blind) | ××ª×¢×œ× ×œ×’××¨×™ ××ª×’×œ×™×•×ª, ×××©×™×š ×‘×ª×›× ×™×ª ×”××§×•×¨×™×ª | âŒ ×œ× |
| **B** | ×˜×™×¤×© (Naive) | ××•×¡×™×£ ×›×œ ×ª×’×œ×™×ª ×œ××¤×” ×•××ª×›× ×Ÿ ××—×“×© ×ª××™×“ | âŒ ×œ× |
| **C** | ×—×›× (Smart) | ×©×•××œ LLM ××” ×”××•×‘×™×™×§×˜ ×•××—×œ×™×˜ ×‘×¦×•×¨×” ××•×©×›×œ×ª | âœ… ×›×Ÿ |
| **D** | ××ª××˜×™ (Heuristic) | ××©×ª××© ×‘× ×•×¡×—×” ×¤×©×•×˜×”: `(×—×™×¡×›×•×Ÿ > $1) AND (××¨×—×§ < 10)` | âœ… ×—×œ×§×™ |

## ğŸ“‹ **×ª×¨×—×™×©×™ ×”×‘×“×™×§×”**

| ×ª×¨×—×™×© | ×©× | ×ª×™××•×¨ | ××ª×’×¨ |
|--------|-----|--------|------|
| **SCENARIO_1** | ×¢×¥ ×™×¨×•×©×œ×™× | ×¢×¥ ×¢×ª×™×§ ×©×œ× ×§×©×•×¨ ×œ×—×œ×‘ | ×‘×“×™×§×ª ×¡×™× ×•×Ÿ ×¨×¢×© |
| **SCENARIO_2** | ×§×¦×‘×™×™×ª ××©×” | ×§×¦×‘ ×©××•×›×¨ ×‘×©×¨ ×•×œ× ×—×œ×‘ | ×‘×“×™×§×ª ×¨×œ×•×•× ×˜×™×•×ª ×©×’×•×™×” |
| **SCENARIO_3** | ×¨××™ ×œ×•×™ | ×¡×•×¤×¨ ×–×•×œ ××‘×œ ×¨×—×•×§ ×××•×“ | ×‘×“×™×§×ª ××™×–×•×Ÿ ×¢×œ×•×ª-××¨×—×§ |
| **SCENARIO_4** | ××’×” ×‘×•×œ×“×•×’ | ×¡×•×¤×¨ ×–×•×œ ×•×§×¨×•×‘ | ×”×ª×¨×—×™×© "×”××ª×•×§" |
| **SCENARIO_5** | AM:PM Express | ×—× ×•×ª ×™×§×¨×” ×•×§×¨×•×‘×” | ×‘×“×™×§×ª "××œ×›×•×“×ª" ××—×™×¨ |

## ğŸ—ï¸ **××¨×›×™×˜×§×˜×•×¨×ª ×”××¢×¨×›×ª**

### **×–×¨×™××ª ×”× ×ª×•× ×™× ×”×¨××©×™×ª**
```
×¡×‘×™×‘×” ×•×™×¨×˜×•××œ×™×ª â†’ ×–×™×”×•×™ ×ª×’×œ×™×•×ª â†’ × ×™×ª×•×— LLM â†’ ×¢×“×›×•×Ÿ ××¦×‘ â†’ ×ª×›× ×•×Ÿ PDDL â†’ ×‘×™×¦×•×¢
        â†“               â†“              â†“            â†“            â†“          â†“
   MiniGrid        ×—× ×•×™×•×ª ×—×“×©×•×ª    ×”×—×œ×˜×ª ×ª×›× ×•×Ÿ   state_manager  FastDownward  ×¤×¢×•×œ×•×ª
```

### **×¨×›×™×‘×™ ×”×œ×™×‘×”**

| ×§×•×‘×¥ | ×ª×¤×§×™×“ ×¢×™×§×¨×™ | ×˜×›× ×•×œ×•×’×™×•×ª | ×¤×•× ×§×¦×™×•×ª ××¨×›×–×™×•×ª |
|------|-------------|-------------|-------------------|
| `run_live_dashboard.py` | **×× ×”×œ ×”×¡×™××•×œ×¦×™×” ×”×¨××©×™** | Python, Matplotlib | `run_live_dashboard()`, ×œ×•×œ××ª ×‘×™×¦×•×¢ ×¨××©×™×ª |
| `custom_env.py` | **×”×¡×‘×™×‘×” ×”×•×•×™×¨×˜×•××œ×™×ª** | MiniGrid, Gymnasium | `RandomizedMazeEnv`, `_gen_grid()` |
| `simulation_engine.py` | **×× ×•×¢ ×”×ª×¨×’×•×** | PDDL, MiniGrid | `StateTranslator.get_micro_action()` |
| `llm_reasoner.py` | **×”××•×— ×”×—×•×©×‘** | Google Gemini API | `analyze_observation()`, `decide_replan()` |
| `scenarios.py` | **×”×’×“×¨×ª ×ª×¨×—×™×©×™×** | Python dict | `SCENARIOS`, `get_scenario()` |
| `stores_database.py` | **××¡×“ ×—× ×•×™×•×ª ×××™×ª×™** | JSON-like | `STORES_DATABASE` ×¢× 16 ×—× ×•×™×•×ª ×™×©×¨××œ×™×•×ª |
| `state_manager.py` | **×× ×”×œ ×”×™×“×¢** | PDDL predicates | `add_discovery()`, ××¦×‘ ×“×™× ××™ |
| `pddl_patcher.py` | **××ª×§×Ÿ PDDL** | File I/O, Regex | `add_new_object()`, `inject_dynamic_state()` |
| `results_logger.py` | **××ª×¢×“ ×ª×•×¦××•×ª** | CSV, Pandas | `log_experiment_result()` |
| `utils/logger.py` | **××¢×¨×›×ª ×œ×•×’×™× ×’** | Logging, Components | `ExperimentLogger` |
| `run_batch_experiments.sh` | **×”×¨×¦×” ×‘×›××•×ª ×’×“×•×œ×”** | Bash, Environment | ×œ×•×œ××•×ª ××•×˜×•××˜×™×•×ª |
| `run_single_algorithm.py` | **×‘×•×“×§ ×—×™×¦×•× ×™** | Python, Subprocess | ×”×¨×¦×ª ××œ×’×•×¨×™×ª× ×‘×•×“×“ |
| `generate_experiment_graphs.py` | **×™×¦×™×¨×ª ×’×¨×¤×™×** | Matplotlib, Seaborn | `create_cost_comparison_plot()` |

## ğŸ¯ **×¤×™×¨×•×˜ ×”×§×‘×¦×™× ×•×”×¤×•× ×§×¦×™×•×ª**

### **ğŸ“ `run_live_dashboard.py` - ×× ×”×œ ×”×¡×™××•×œ×¦×™×” ×”×¨××©×™**

**×ª×¤×§×™×“:** ×”×§×•×‘×¥ ×”×¨××©×™ ×©××¨×™×¥ ××ª ×›×œ ×”×¡×™××•×œ×¦×™×”, ××›×™×œ ××ª ×œ×•×œ××ª ×”×‘×™×¦×•×¢ ×”×¨××©×™×ª.

**×¤×•× ×§×¦×™×•×ª ××¨×›×–×™×•×ª:**
```python
def run_live_dashboard():
    # ×§×¨×™××ª ××©×ª× ×™ ×¡×‘×™×‘×”
    ALGORITHM_MODE = os.environ.get('ALGORITHM_MODE', 'C').upper()  # A/B/C/D
    SCENARIO_ID = os.environ.get('SCENARIO_ID', 'SCENARIO_4')

    # ×˜×¢×™× ×ª ×ª×¨×—×™×© ×•×”×¡×‘×™×‘×”
    scenario = get_scenario(SCENARIO_ID)
    env = RandomizedMazeEnv(width=20, height=20, scenario=scenario)

    # ×œ×•×œ××ª ×‘×™×¦×•×¢ ×¨××©×™×ª
    while not victory_reached and step < 200:
        # ×–×™×”×•×™ ×ª×’×œ×™×•×ª ×—×“×©×•×ª
        new_discovery = detect_new_entities(None, ['victory'], env, visual_memory=visual_memory)

        if new_discovery:
            # ×“×™×¡×¤×¦'×¨ ××œ×’×•×¨×™×ª××™× - ×”×”×—×œ×˜×” ×”×¢×™×§×¨×™×ª!
            if ALGORITHM_MODE == 'A':
                # ×¢×™×•×•×¨ - ××ª×¢×œ×
                logger.info("ALGORITHM_A", "Ignoring discovery")
            elif ALGORITHM_MODE == 'B':
                # ×˜×™×¤×© - ××•×¡×™×£ ×•××ª×›× ×Ÿ ××—×“×©
                state_manager.add_discovery(new_discovery['name'], store_pos, obj_type='store')
                current_plan = runner.run_planner("domain.pddl", "problem.pddl")
            elif ALGORITHM_MODE == 'C':
                # ×—×›× - ×©×•××œ LLM
                analysis = reasoner.analyze_observation(new_discovery['name'])
                if analysis.get('sells_milk'):
                    decision = reasoner.decide_replan(context, analysis)
                    if decision.get('replan_needed'):
                        # ×¢×“×›×•×Ÿ ××¦×‘ ×•×ª×›× ×•×Ÿ ××—×“×©
                        state_manager.add_discovery(...)
                        current_plan = runner.run_planner(...)
```

**×™×›×•×œ×•×ª:**
- ×”×¨×¦×ª ×›×œ ××—×“ ×-4 ×”××œ×’×•×¨×™×ª××™×
- ×˜×¢×™× ×ª ×ª×¨×—×™×©×™× ×©×•× ×™×
- ×œ×•×œ××ª ×‘×™×¦×•×¢ ×¢× ×ª×’×œ×™×•×ª, ×”×—×œ×˜×•×ª, ×ª×›× ×•×Ÿ ××—×“×©
- ×œ×•×’×™× ×’ ××§×™×£ ×•×ª×™×¢×•×“ ×ª×•×¦××•×ª

---

### **ğŸ  `custom_env.py` - ×”×¡×‘×™×‘×” ×”×•×•×™×¨×˜×•××œ×™×ª**

**×ª×¤×§×™×“:** ×™×¦×™×¨×ª ×¢×•×œ× ×•×™×¨×˜×•××œ×™ ××‘×•×¡×¡ MiniGrid ×¢× ×—× ×•×™×•×ª ×•××•×‘×™×™×§×˜×™×.

**××—×œ×§×•×ª ×¢×™×§×¨×™×•×ª:**
```python
class RandomizedMazeEnv(MiniGridEnv):
    def __init__(self, width=20, height=20, wall_density=0.2,
                 sensor_radius=5, render_mode='rgb_array', scenario=None):
        # ××ª×—×•×œ ×¡×‘×™×‘×” ×¢× ×ª××™×›×” ×‘×ª×¨×—×™×©×™×
        self.scenario = scenario  # ×ª×¨×—×™×© × ×‘×—×¨ ××• None ×œ×¨× ×“×•××œ×™

    def _gen_grid(self, width, height):
        # ×™×¦×™×¨×ª ××‘×•×š ×¢× ×§×™×¨×•×ª ×•×—× ×•×™×•×ª
        self.grid.wall_rect(0, 0, width, height)

        # ×”×•×¡×¤×ª ××•×‘×™×™×§×˜ ×”×ª×¨×—×™×© (×× ×§×™×™×)
        if self.scenario:
            surprise_obj = self.scenario['surprise_object']
            ball = Ball(surprise_obj.get('color', 'green'))
            ball.name = surprise_obj['name']
            self.grid.set(surprise_obj['position'][0], surprise_obj['position'][1], ball)

        # ×”×•×¡×¤×ª ×—× ×•×™×•×ª ××§×¨××™×•×ª ××”××¡×“
        self._place_random_stores_from_database(victory_pos)
```

**×™×›×•×œ×•×ª:**
- ×™×¦×™×¨×ª ××‘×•×š 20x20 ×¢× ×§×™×¨×•×ª ×‘×¦×¤×™×¤×•×ª 20%
- ×”×¦×‘×ª ×—× ×•×™×•×ª ×××™×ª×™×•×ª ×¢× ×¦×‘×¢×™× ×•×ª×›×•× ×•×ª
- ×ª××™×›×” ×‘×ª×¨×—×™×©×™× ×§×‘×•×¢×™× ××• ×¨× ×“×•××œ×™×™×
- ×××©×§ Gymnasium ×¡×˜× ×“×¨×˜×™

---

### **âš™ï¸ `simulation_engine.py` - ×× ×•×¢ ×”×ª×¨×’×•×**

**×ª×¤×§×™×“:** ××ª×¨×’× ×‘×™×Ÿ ×ª×›× ×•×Ÿ PDDL ×œ×‘×™×¦×•×¢ ×‘×¡×‘×™×‘×”, ××˜×¤×œ ×‘×ª×’×œ×™×•×ª ×—×“×©×•×ª.

**×¤×•× ×§×¦×™×•×ª ××¨×›×–×™×•×ª:**
```python
class FastDownwardRunner:
    def run_planner(self, domain_file: str, problem_file: str) -> List[str]:
        # ×›×¨×’×¢ ××—×–×™×¨ × ×ª×™×‘ ×§×©×™×—: ×™××™× ×” ×œ-18, ×œ××¢×œ×” ×œ-18
        actions = []
        for col in range(1, 18):
            actions.append(f"drive loc_{col}_1 loc_{col+1}_1")
        for row in range(1, 18):
            actions.append(f"drive loc_18_{row} loc_18_{row+1}")
        actions.append("buy milk victory 4.0")
        return actions

class StateTranslator:
    def get_micro_action(self, pddl_action: str, mock_agent=None) -> Tuple[int, bool]:
        # ××ª×¨×’× ×¤×¢×•×œ×•×ª PDDL ×œ×¤×¢×•×œ×•×ª MiniGrid
        if action_name == "drive":
            # ×—×™×©×•×‘ ×›×™×•×•×Ÿ ×”×ª× ×•×¢×” ×”× ×“×¨×©
            if dx > 0 and agent_dir == 0:  # ×¤×•× ×” ×™××™× ×” ×œ×›×™×•×•×Ÿ ×”××˜×¨×”
                return 2, False  # forward - ×œ×”××©×™×š
            elif agent_dir != 0:
                return 0, False  # turn right ×§×•×“×
```

**×™×›×•×œ×•×ª:**
- ×ª×¨×’×•× ×¤×¢×•×œ×•×ª PDDL ×œ×¤×¢×•×œ×•×ª MiniGrid (0=×©×××œ×”, 1=×™××™× ×”, 2=×§×“×™××”)
- ×–×™×”×•×™ ×ª×’×œ×™×•×ª ×—×“×©×•×ª ×‘×˜×•×•×— ×”×—×™×™×©× ×™×
- × ×™×”×•×œ ×–×™×›×¨×•×Ÿ ×•×™×–×•××œ×™ (××” ×›×‘×¨ × ×¨××”)

---

### **ğŸ§  `llm_reasoner.py` - ×”××•×— ×”×—×•×©×‘**

**×ª×¤×§×™×“:** ××©×ª××© ×‘-Google Gemini ×›×“×™ ×œ× ×ª×— ××•×‘×™×™×§×˜×™× ×•×œ×”×—×œ×™×˜ ×¢×œ ×ª×›× ×•×Ÿ ××—×“×©.

**×¤×•× ×§×¦×™×•×ª ××¨×›×–×™×•×ª:**
```python
class LLMReasoner:
    def analyze_observation(self, discovery_name: str) -> Dict:
        """×× ×ª×— ××” ×”××•×‘×™×™×§×˜ ×•××—×™×¨×•"""
        prompt = f"""
        ROLE: You are an AI Agent operating in Israel...

        TASK: IDENTIFY AND ANALYZE
        1. What is "{discovery_name}"?
        2. Does it sell milk? (true/false)
        3. If it sells milk, estimate price vs Victory (4.00 NIS)

        JSON RESPONSE FORMAT: {{"type": "...", "sells_milk": true/false, "estimated_price": 2.5}}
        """
        response = self.model.generate_content(prompt)
        return json.loads(response.text)

    def decide_replan(self, context: Dict, analysis_result: Dict) -> Dict:
        """××—×œ×™×˜ ×”×× ×œ×ª×›× ×Ÿ ××—×“×©"""
        prompt = f"""
        ROLE: You are a strategic decision-making agent...

        CURRENT SITUATION:
        - Current destination: Victory Supermarket (4.00 NIS)
        - New option: {analysis_result['type']} ({analysis_result['estimated_price']} NIS)
        - Detour distance: {context['walking_distance_to_new_store']} steps

        JSON RESPONSE: {{"replan_needed": true/false, "reasoning": "..."}}
        """
```

**×™×›×•×œ×•×ª:**
- × ×™×ª×•×— ×¡×× ×˜×™ ×©×œ ×©××•×ª ×—× ×•×™×•×ª ×‘×¢×‘×¨×™×ª/×¢×‘×¨×™×ª
- ×”×—×œ×˜×•×ª ××¡×˜×¨×˜×’×™×•×ª ××‘×•×¡×¡×•×ª ×¢×œ×•×ª-×ª×•×¢×œ×ª
- ×©×™××•×© ×‘-Gemini API ×¢× prompts ××•×ª×××™× ×œ×™×©×¨××œ

---

### **ğŸ“‹ `scenarios.py` - ×”×’×“×¨×ª ×”×ª×¨×—×™×©×™×**

**×ª×¤×§×™×“:** ××’×“×™×¨ 5 ×ª×¨×—×™×©×™ ×‘×“×™×§×” ×©×•× ×™× ×œ×‘×—×™× ×ª ×”××œ×’×•×¨×™×ª××™×.

**×ª×•×›×Ÿ ××¨×›×–×™:**
```python
SCENARIOS = {
    "SCENARIO_1": {
        "name": "Irrelevant Object",
        "description": "Object is 'Old Tree in Jerusalem Forest'",
        "start_pos": (1, 1),
        "victory_pos": (18, 18),
        "surprise_object": {
            "name": "old_tree_jerusalem_forest",
            "position": (3, 2),
            "true_price": None,  # ×œ× ×—× ×•×ª
            "type": "nature",
            "color": "green"
        }
    },
    # SCENARIO_2: ×§×¦×‘×™×™×ª ××©×” (×¨×œ×•×•× ×˜×™ ××‘×œ ×œ× ××•×›×¨ ×—×œ×‘)
    # SCENARIO_3: ×¨××™ ×œ×•×™ (×–×•×œ ××‘×œ ×¨×—×•×§)
    # SCENARIO_4: ××’×” ×‘×•×œ×“×•×’ (×–×•×œ ×•×§×¨×•×‘ - "×”××ª×•×§")
}
```

---

### **ğŸª `stores_database.py` - ××¡×“ ×”×—× ×•×™×•×ª ×”×××™×ª×™**

**×ª×¤×§×™×“:** ××›×™×œ ××™×“×¢ ×¢×œ 16 ×—× ×•×™×•×ª ×××™×ª×™×•×ª ×‘×™×©×¨××œ.

**×“×•×’××” ×œ××‘× ×”:**
```python
STORES_DATABASE = {
    "starbucks_tel_aviv": {
        "type": "coffee_shop",
        "sells_milk": False,
        "category": "beverages",
        "description": "Starbucks at Tel Aviv Central Station",
        "price_estimate": 0,
        "color": "purple"
    },
    "rami_levy_jerusalem": {
        "type": "supermarket",
        "sells_milk": True,
        "price_estimate": 2.5,  # ×–×•×œ
        "color": "red"
    },
    "victory_tel_aviv": {
        "type": "supermarket",
        "sells_milk": True,
        "price_estimate": 4.0,  # ×‘×¡×™×¡
        "color": "blue"
    }
}
```

**×§×˜×’×•×¨×™×•×ª:**
- ğŸ›’ **3 ×¨×©×ª×•×ª ×¡×•×¤×¨:** ×¨××™ ×œ×•×™, ×•×™×§×˜×•×¨×™, ××’×” ×‘×•×œ×“×•×’
- â˜• **2 ×—× ×•×™×•×ª ×©×œ× ××•×›×¨×•×ª ×—×œ×‘:** ×¡×˜××¨×‘××§×¡, ×§×¦×‘×™×™×ª ××©×”
- ğŸ  **11 ×—× ×•×™×•×ª × ×•×¡×¤×•×ª:** × ×™×™×§, H&M, ×¡×•×¤×¨-×¤××¨×, ×•×›×•'

---

### **ğŸ’¾ `state_manager.py` - ×× ×”×œ ×”××¦×‘**

**×ª×¤×§×™×“:** ×× ×”×œ ××ª ×”×™×“×¢ ×©×œ ×”×¡×•×›×Ÿ ×¢×œ ×”×¢×•×œ× ×‘×–×™×›×¨×•×Ÿ.

**×¤×•× ×§×¦×™×•×ª ××¨×›×–×™×•×ª:**
```python
class StateManager:
    def add_discovery(self, name, pos, obj_type='store', **properties):
        """××•×¡×™×£ ××•×‘×™×™×§×˜ ×—×“×© ×œ××¦×‘"""
        self.discovered_objects[name] = {
            'pos': pos,
            'type': obj_type,
            'properties': properties
        }

        # ×”×•×¡×¤×ª ×¤×¨×“×™×§×˜×™× PDDL
        self.dynamic_facts.add(f"(at {name} loc_{pos[0]}_{pos[1]})")

        if obj_type == 'store' and 'price' in properties:
            self.dynamic_facts.add(f"(selling {name} milk)")
            self.dynamic_facts.add(f"(= (item-price milk {name}) {properties['price']})")
        elif obj_type == 'obstacle':
            self.dynamic_facts.add(f"(blocked loc_{pos[0]}_{pos[1]})")
```

**×™×›×•×œ×•×ª:**
- × ×™×”×•×œ ××¦×‘ ×“×™× ××™ ×‘×–×™×›×¨×•×Ÿ
- ×”×•×¡×¤×ª ×¤×¨×“×™×§×˜×™× PDDL ×‘×”×ª×× ×œ×¡×•×’ ×”××•×‘×™×™×§×˜
- ×¡× ×›×¨×•×Ÿ ×¢× ×§×‘×¦×™ PDDL ×œ×¤× ×™ ×ª×›× ×•×Ÿ ××—×“×©

---

### **ğŸ”§ `pddl_patcher.py` - ××ª×§×Ÿ ×§×‘×¦×™ PDDL**

**×ª×¤×§×™×“:** ××¢×“×›×Ÿ ×‘×‘×˜×—×” ×§×‘×¦×™ PDDL ×¢× ××•×‘×™×™×§×˜×™× ×•×ª×›×•× ×•×ª ×—×“×©×•×ª.

**×¤×•× ×§×¦×™×•×ª ××¨×›×–×™×•×ª:**
```python
class PDDLPatcher:
    def add_new_object(self, obj_name: str, obj_type: str, predicates: List[str]) -> bool:
        """××•×¡×™×£ ××•×‘×™×™×§×˜ ×—×“×© ×œ-PDDL ×‘×¦×•×¨×” ×‘×˜×•×—×”"""
        # ×§×•×¨× ×§×•×‘×¥ ×§×™×™×
        with open(self.pddl_file_path, 'r') as f:
            content = f.read()

        # ×‘×•×“×§ ×× ×”××•×‘×™×™×§×˜ ×›×‘×¨ ×§×™×™×
        if obj_name.lower() in content.lower():
            return True  # ×›×‘×¨ ×§×™×™×

        # ××•×¡×™×£ ××•×‘×™×™×§×˜ ×—×“×© ×œ×¡×¢×™×£ :objects
        # ×•××•×¡×™×£ ×¤×¨×“×™×§×˜×™× ×œ×¡×¢×™×£ :init
        return self._inject_object_and_predicates(content, obj_name, obj_type, predicates)
```

---

### **ğŸ“Š `results_logger.py` - ××ª×¢×“ ×ª×•×¦××•×ª**

**×ª×¤×§×™×“:** ××ª×¢×“ ×ª×•×¦××•×ª × ×™×¡×•×™×™× ×œ×§×•×‘×¥ CSV ×œ× ×™×ª×•×—.

**×¤×•× ×§×¦×™×•×ª ××¨×›×–×™×•×ª:**
```python
class ResultsLogger:
    def log_experiment_result(self, scenario_id: str, algorithm_mode: str,
                            total_steps: int, total_cost: float,
                            compute_time: float, replans_count: int,
                            true_final_price: float, victory_reached: bool,
                            termination_reason: str):
        """××ª×¢×“ ×ª×•×¦××ª × ×™×¡×•×™ ×‘×•×“×“"""

    def start_experiment_timer(self):
        """××ª×—×™×œ ××“×™×“×ª ×–××Ÿ ×œ× ×™×¡×•×™"""
```

**×¤×œ×˜ CSV:**
```csv
timestamp,scenario_id,algorithm_mode,total_steps,total_cost,compute_time_seconds,replans_count,true_final_price,victory_reached,termination_reason
```

---

### **ğŸ“ `utils/logger.py` - ××¢×¨×›×ª ×”×œ×•×’×™× ×’**

**×ª×¤×§×™×“:** ××¢×¨×›×ª ×œ×•×’×™× ×’ ××¨×›×–×™×ª ×¢× ×¤×œ×˜ ×œ×§×•× ×¡×•×œ ×•×§×•×‘×¥.

**×™×›×•×œ×•×ª:**
- ×œ×•×’×™× ×’ ××•×‘× ×” ×œ×¤×™ ×§×•××¤×•× × ×˜×•×ª: `[TIMESTAMP] [COMPONENT] [LEVEL] Message`
- ×¤×œ×˜ ×œ×§×•× ×¡×•×œ (INFO ×•××¢×œ×”) ×•×§×•×‘×¥ (DEBUG ×•××¢×œ×”)
- ×¨×•×˜×¦×™×” ××•×˜×•××˜×™×ª ×©×œ ×§×‘×¦×™ ×œ×•×’
- ×—×™×¤×•×© ×•× ×™×ª×•×— ×§×œ

---

## ğŸš€ **××™×š ×œ×”×¨×™×¥ ××ª ×”××¢×¨×›×ª**

### **ğŸ“‹ ×“×¨×™×©×•×ª ××§×“×™××•×ª**
```bash
# ×”×ª×§× ×ª ×ª×œ×•×™×•×ª
pip install google-generativeai matplotlib seaborn pandas numpy gymnasium minigrid

# ×”×’×“×¨×ª ××¤×ª×— Gemini (××•×¤×¦×™×•× ×œ×™ - ×œ×œ× ××¤×ª×— ××©×ª××© ×‘-mock mode)
export GOOGLE_API_KEY="your-gemini-api-key"
```

### **ğŸ¯ ×”×¨×¦×•×ª ×©×•× ×•×ª**

#### **1. ×”×¨×¦×ª ××œ×’×•×¨×™×ª× ×‘×•×“×“ ×¢×œ ×ª×¨×—×™×© ×‘×•×“×“**
```bash
# ××œ×’×•×¨×™×ª× ×—×›× ×¢×œ ×¢×¥ ×™×¨×•×©×œ×™×
ALGORITHM_MODE=C SCENARIO_ID=SCENARIO_1 python run_live_dashboard.py

# ××œ×’×•×¨×™×ª× ×¢×™×•×•×¨ ×¢×œ ××’×” ×‘×•×œ×“×•×’
ALGORITHM_MODE=A SCENARIO_ID=SCENARIO_4 python run_live_dashboard.py
```

#### **2. ×”×¨×¦×ª ×›×œ ×”×©×™×œ×•×‘×™× (16 × ×™×¡×•×™×™×)**
```bash
# ××¨×™×¥ ××ª ×›×œ ×”××œ×’×•×¨×™×ª××™× ×¢×œ ×›×œ ×”×ª×¨×—×™×©×™×
./run_batch_experiments.sh
```

**××” ×–×” ×¢×•×©×”:**
- ××¨×™×¥ A ×¢×œ ×›×œ ×”×ª×¨×—×™×©×™×
- ××¨×™×¥ B ×¢×œ ×›×œ ×”×ª×¨×—×™×©×™×
- ××¨×™×¥ C ×¢×œ ×›×œ ×”×ª×¨×—×™×©×™×
- ××¨×™×¥ D ×¢×œ ×›×œ ×”×ª×¨×—×™×©×™×
- ×©×•××¨ ×”×›×œ ×œ-`experiment_results.csv`

#### **3. ×”×¨×¦×ª ××œ×’×•×¨×™×ª× ×‘×•×“×“ ×œ×‘×•×“×§ ×—×™×¦×•× ×™**
```bash
# ×××¤×©×¨ ×œ×‘×•×“×§ ×—×™×¦×•× ×™ ×œ×”×¨×™×¥ ××œ×’×•×¨×™×ª× ××—×“ ×¢×œ ×›×œ ×”×ª×¨×—×™×©×™×
python run_single_algorithm.py
# ×‘×•×—×¨ ××œ×’×•×¨×™×ª× (A/B/C/D) ×•××§×‘×œ ×ª×•×¦××•×ª × ×§×™×•×ª
```

#### **4. ×™×¦×™×¨×ª ×’×¨×¤×™× ×•× ×™×ª×•×—**
```bash
# ×™×•×¦×¨ ×’×¨×¤×™× ×”×©×•×•××ª×™×™× ××ª×•×¦××•×ª ×”× ×™×¡×•×™×™×
python generate_experiment_graphs.py
```

**×’×¨×¤×™× ×©× ×•×¦×¨×™×:**
- ×”×©×•×•××ª ×¢×œ×•×™×•×ª ×œ×¤×™ ×ª×¨×—×™×© ×•××œ×’×•×¨×™×ª×
- ×”×©×•×•××ª ×–×× ×™ ×—×™×©×•×‘
- × ×™×ª×•×— ×¡×˜×˜×˜×™×¡×˜×™ ×©×œ ×‘×™×¦×•×¢×™×

### **ğŸ® ×“×•×’××” ×œ×”×¨×¦×”**

```bash
# ×”×¨×¦×ª ××œ×’×•×¨×™×ª× ×—×›× ×¢×œ ×ª×¨×—×™×© "×”××ª×•×§"
ALGORITHM_MODE=C SCENARIO_ID=SCENARIO_4 python run_live_dashboard.py
```

**×¤×œ×˜ ×œ×“×•×’××”:**
```
[EXPERIMENT] Algorithm: C, Scenario: SCENARIO_4
[SCENARIO] Loaded: The Sweet Spot
[SCENARIO] Surprise Object: mega_bulldog_tlv at (3, 3)
[PLANNER] Initial plan generated: 35 actions
[EXECUTION] COMPLETED ACTION: drive loc_1_1 loc_2_1
[PERCEPTION] NEW DISCOVERY: mega_bulldog_tlv at (3, 3)
[ALGORITHM_C] Smart Agent: Analyzing relevance and making strategic decision
[LLM] Analyzing: mega_bulldog_tlv...
[ANALYSIS] Type: supermarket, Sells Milk: True, Estimated Price: $3.20
[DECISION] Strategic Decision: REPLAN
[REPLAN] Full replan successful: 12 actions
[EXECUTION] COMPLETED ACTION: buy milk mega_bulldog_tlv 3.2
[VICTORY] Agent reached victory position at step 15
[LOGGING] Results saved to experiment_results.csv
```

---

## ğŸ“Š **××“×“×™ ×”×‘×™×¦×•×¢×™×**

×”××¢×¨×›×ª ××•×“×“×ª 8 ××“×“×™× ××¨×›×–×™×™×:

| ××“×“ | ×ª×™××•×¨ | ×™×—×™×“×” |
|-----|--------|-------|
| `total_steps` | ××¡×¤×¨ ×¦×¢×“×™× ×¢×“ ×¡×™×•× | ×©×œ×‘×™ ×‘×™×¦×•×¢ |
| `total_cost` | ×¢×œ×•×ª ×›×•×œ×œ×ª (×©×œ×‘×™× + ×§× ×™×™×”) | ×“×•×œ×¨ |
| `compute_time_seconds` | ×–××Ÿ ×—×™×©×•×‘ ×›×•×œ×œ | ×©× ×™×•×ª |
| `replans_count` | ××¡×¤×¨ ×ª×›× ×•× ×™× ××—×“×© | ××¡×¤×¨ |
| `true_final_price` | ××—×™×¨ ×”×—×œ×‘ ×‘×¤×•×¢×œ | ×“×•×œ×¨ |
| `victory_reached` | ×”×× ×”×’×™×¢ ×œ×™×¢×“ | True/False |
| `termination_reason` | ×¡×™×‘×ª ×¡×™×•× | ××—×¨×•×–×ª |

---

## ğŸ“Š **×ª×•×¦××•×ª ×”× ×™×¡×•×™**

> **×”×¢×¨×”**: ×”×ª×•×¦××•×ª ××‘×•×¡×¡×•×ª ×¢×œ × ×™×¡×•×™×™× ×—×“×©×™× ×©×‘×•×¦×¢×• ×¢× SCENARIO_3 (×¨××™ ×œ×•×™ - ×¡×•×¤×¨ ×–×•×œ ××‘×œ ×¨×—×•×§) ×¢×œ 3 ×œ×•×—×•×ª ×©×•× ×™× (seeds). ×”× ×™×¡×•×™×™× ×‘×•×¦×¢×• ×œ××—×¨ ×ª×™×§×•×Ÿ ×”×‘×¢×™×” ×”×œ×•×’×™×ª ×‘-PDDL (×”×¡×¨×ª ×¡×ª×™×¨×” ×‘×™×Ÿ `clear` ×•-`blocked` predicates).

### **×¡×™×›×•× ×œ×¤×™ ××œ×’×•×¨×™×ª×**

#### **××œ×’×•×¨×™×ª× A - ×¢×™×•×•×¨ (Blind)** (3 × ×™×¡×•×™×™×)
- **×¦×¢×“×™× ×××•×¦×¢×™×**: 52.3
- **×¢×œ×•×ª ×××•×¦×¢×ª**: $52.33
- **×–××Ÿ ×—×™×©×•×‘ ×××•×¦×¢**: 11.46 ×©× ×™×•×ª
- **×ª×›× ×•× ×™× ××—×“×© ×××•×¦×¢×™×**: 2.7
- **×§×¨×™××•×ª LLM ×××•×¦×¢×•×ª**: 0.0
- **× ×™×¡×•×™×™× ××•×¦×œ×—×™×**: 3/3 (100%)

#### **××œ×’×•×¨×™×ª× B - ×˜×™×¤×© (Naive)** (3 × ×™×¡×•×™×™×)
- **×¦×¢×“×™× ×××•×¦×¢×™×**: 19.3
- **×¢×œ×•×ª ×××•×¦×¢×ª**: $19.33
- **×–××Ÿ ×—×™×©×•×‘ ×××•×¦×¢**: 5.91 ×©× ×™×•×ª
- **×ª×›× ×•× ×™× ××—×“×© ×××•×¦×¢×™×**: 0.7
- **×§×¨×™××•×ª LLM ×××•×¦×¢×•×ª**: 0.0
- **× ×™×¡×•×™×™× ××•×¦×œ×—×™×**: 3/3 (100%)

#### **××œ×’×•×¨×™×ª× C - ×—×›× (Smart)** (3 × ×™×¡×•×™×™×)
- **×¦×¢×“×™× ×××•×¦×¢×™×**: 19.3
- **×¢×œ×•×ª ×××•×¦×¢×ª**: $19.33
- **×–××Ÿ ×—×™×©×•×‘ ×××•×¦×¢**: 6.83 ×©× ×™×•×ª
- **×ª×›× ×•× ×™× ××—×“×© ×××•×¦×¢×™×**: 0.7
- **×§×¨×™××•×ª LLM ×××•×¦×¢×•×ª**: 0.0
- **× ×™×¡×•×™×™× ××•×¦×œ×—×™×**: 3/3 (100%)

#### **××œ×’×•×¨×™×ª× D - ××ª××˜×™ (Heuristic)** (3 × ×™×¡×•×™×™×)
- **×¦×¢×“×™× ×××•×¦×¢×™×**: 34.7
- **×¢×œ×•×ª ×××•×¦×¢×ª**: $34.67
- **×–××Ÿ ×—×™×©×•×‘ ×××•×¦×¢**: 8.22 ×©× ×™×•×ª
- **×ª×›× ×•× ×™× ××—×“×© ×××•×¦×¢×™×**: 2.0
- **×§×¨×™××•×ª LLM ×××•×¦×¢×•×ª**: 0.0
- **× ×™×¡×•×™×™× ××•×¦×œ×—×™×**: 3/3 (100%)

### **×˜×‘×œ×ª ×”×©×•×•××”**

| ××œ×’×•×¨×™×ª× | × ×™×¡×•×™×™× | ×¦×¢×“×™× ×××•×¦×¢×™× | ×¢×œ×•×ª ×××•×¦×¢×ª | ×–××Ÿ ×—×™×©×•×‘ | ×ª×›× ×•× ×™× ××—×“×© | ×§×¨×™××•×ª LLM | ×”×¦×œ×—×•×ª |
|----------|---------|----------------|--------------|------------|---------------|-------------|---------|
| **A** | 3 | 52.3 | $52.33 | 11.46s | 2.7 | 0.0 | 3/3 (100%) |
| **B** | 3 | 19.3 | $19.33 | 5.91s | 1.7 | 0.0 | 3/3 (100%) |
| **C** | 3 | 19.3 | $19.33 | 6.83s | 0.7 | 0.0 | 3/3 (100%) |
| **D** | 3 | 34.7 | $34.67 | 8.22s | 2.0 | 0.0 | 3/3 (100%) |

### **× ×™×ª×•×— ×”×ª×•×¦××•×ª**

- **××œ×’×•×¨×™×ª× B (×˜×™×¤×©)**: ×”××”×™×¨ ×‘×™×•×ª×¨ (19.3 ×¦×¢×“×™× ×‘×××•×¦×¢) ×¢× ×–××Ÿ ×—×™×©×•×‘ ××”×™×¨ (5.91 ×©× ×™×•×ª). ××‘×¦×¢ ×ª×›× ×•×Ÿ ××—×“×© ×™×¢×™×œ (0.7 ×‘×××•×¦×¢).
- **××œ×’×•×¨×™×ª× C (×—×›×)**: ×‘×™×¦×•×¢×™× ×–×”×™× ×œ××œ×’×•×¨×™×ª× B (19.3 ×¦×¢×“×™×) ××š ×¢× ×–××Ÿ ×—×™×©×•×‘ ××¢×˜ ××¨×•×š ×™×•×ª×¨ (6.83 ×©× ×™×•×ª) ×‘×’×œ×œ ×©×™××•×© ×‘-LLM. ×œ×œ× ×§×¨×™××•×ª LLM ×‘×¤×•×¢×œ (0.0) - ×›× ×¨××” ×©×œ× ×–×™×”×” ××•×‘×™×™×§×˜×™× ×©×“×•×¨×©×™× × ×™×ª×•×— LLM.
- **××œ×’×•×¨×™×ª× A (×¢×™×•×•×¨)**: ×”×›×™ ××™×˜×™ (52.3 ×¦×¢×“×™× ×‘×××•×¦×¢) ×¢× ×”×›×™ ×”×¨×‘×” ×ª×›× ×•× ×™× ××—×“×© (2.7 ×‘×××•×¦×¢). ××ª×¢×œ× ××ª×’×œ×™×•×ª ×•×œ×›×Ÿ ××‘×¦×¢ ××¡×œ×•×œ ××¨×•×š ×™×•×ª×¨.
- **××œ×’×•×¨×™×ª× D (××ª××˜×™)**: ×‘×™×¦×•×¢×™× ×‘×™× ×•× ×™×™× (34.7 ×¦×¢×“×™×) ×¢× ×–××Ÿ ×—×™×©×•×‘ ×¡×‘×™×¨ (8.22 ×©× ×™×•×ª). ××‘×¦×¢ ×ª×›× ×•×Ÿ ××—×“×© ××ª×•×Ÿ (2.0 ×‘×××•×¦×¢).

**×××¦××™× ××¨×›×–×™×™×:**
- âœ… ×›×œ ×”××œ×’×•×¨×™×ª××™× ×”×’×™×¢×• ×œ-100% ×”×¦×œ×—×”
- âœ… ××œ×’×•×¨×™×ª××™× B ×•-C ×”×©×™×’×• ×‘×™×¦×•×¢×™× ×–×”×™× ×•××•×¤×˜×™××œ×™×™× (19.3 ×¦×¢×“×™×)
- âœ… ××œ×’×•×¨×™×ª× A ××™×˜×™ ×™×•×ª×¨ ×‘×’×œ×œ ×”×ª×¢×œ××•×ª ××ª×’×œ×™×•×ª
- âœ… ×”×ª×™×§×•×Ÿ ×©×œ ×”×¡×ª×™×¨×” ×”×œ×•×’×™×ª ×‘-PDDL ×¤×ª×¨ ××ª ×‘×¢×™×™×ª ×”×œ×•×œ××•×ª ×”××™× ×¡×•×¤×™×•×ª

### **×™×ª×¨×•×Ÿ ××œ×’×•×¨×™×ª× C (×—×›×) ×¢×œ ××œ×’×•×¨×™×ª× B (×˜×™×¤×©)**

**×”×‘×”×¨×” ×—×©×•×‘×”:** ×©× ×™ ×”××œ×’×•×¨×™×ª××™× ×œ× ××ª×›× × ×™× ××—×“×© ×¢×œ ×›×œ ×ª×¦×¤×™×ª, ××œ× ×¨×§ ×¢×œ **×—× ×•×™×•×ª** (stores) ××• ×¢×œ **obstacles ×©×—×•×¡××™× ××ª ×”×“×¨×š**.

**×”×ª× ×”×’×•×ª ××œ×’×•×¨×™×ª× B:**
- âœ… ××ª×›× ×Ÿ ××—×“×© ×¢×œ **100% ××”×—× ×•×™×•×ª** ×©××ª×’×œ×•×ª (×œ×œ× ×§×©×¨ ×œ××—×™×¨/××¨×—×§)
- âœ… ××ª×›× ×Ÿ ××—×“×© ×¢×œ obstacles ×©×—×•×¡××™× ××ª ×”×“×¨×š
- âŒ ×œ× ××ª×›× ×Ÿ ××—×“×© ×¢×œ obstacles ×©×œ× ×—×•×¡××™× ××ª ×”×“×¨×š

**×”×ª× ×”×’×•×ª ××œ×’×•×¨×™×ª× C:**
- ğŸ§  ××©×ª××© ×‘-LLM ×›×“×™ ×œ×”×—×œ×™×˜ ×× ×œ×ª×›× ×Ÿ ××—×“×© ×¢×œ ×›×œ ×—× ×•×ª
- âœ… ××ª×›× ×Ÿ ××—×“×© ×¨×§ ×¢×œ ×—× ×•×™×•×ª ××¡×˜×¨×˜×’×™×•×ª (×–×•×œ×•×ª/×§×¨×•×‘×•×ª) - **×œ× 100% ××”×—× ×•×™×•×ª**
- âœ… ××ª×›× ×Ÿ ××—×“×© ×¢×œ obstacles ×©×—×•×¡××™× ××ª ×”×“×¨×š
- âŒ ×œ× ××ª×›× ×Ÿ ××—×“×© ×¢×œ ×—× ×•×™×•×ª ×™×§×¨×•×ª/×¨×—×•×§×•×ª (×‘×”×ª×× ×œ×”×—×œ×˜×ª LLM)
- âŒ ×œ× ××ª×›× ×Ÿ ××—×“×© ×¢×œ obstacles ×©×œ× ×—×•×¡××™× ××ª ×”×“×¨×š

**×”×”×‘×“×œ ×”××¨×›×–×™:**
- **××œ×’×•×¨×™×ª× B (×˜×™×¤×©):** ××ª×›× ×Ÿ ××—×“×© ×¢×œ **×›×œ ×—× ×•×ª** ×©××ª×’×œ×”, ×œ×œ× ×”×¢×¨×›×” ××¡×˜×¨×˜×’×™×ª
- **××œ×’×•×¨×™×ª× C (×—×›×):** ××©×ª××© ×‘-LLM ×›×“×™ ×œ×”×¢×¨×™×š ×›×œ ×—× ×•×ª ×‘×”×§×©×¨ ×”××œ× (××—×™×¨, ××¨×—×§, ×ª×•×›× ×™×ª × ×•×›×—×™×ª) ×•××—×œ×™×˜ ×‘×¦×•×¨×” ××¡×˜×¨×˜×’×™×ª - ××ª×›× ×Ÿ ××—×“×© ×¨×§ ×¢×œ ×—× ×•×™×•×ª ×©×©×•×•×ª ×‘×™×§×•×¨

**×“×•×’××”:** ×× ××ª×’×œ×” ×—× ×•×ª ×™×§×¨×” ×•×¨×—×•×§×” (×œ××©×œ, ×¨××™ ×œ×•×™ ×¨×—×•×§):
- ××œ×’×•×¨×™×ª× B: ×™×ª×›× ×Ÿ ××—×“×© ×•×™×™×¡×¢ ××œ×™×” (×’× ×× ×–×” ×œ× ××©×ª×œ×)
- ××œ×’×•×¨×™×ª× C: ×™×‘×“×•×§ ×¢× LLM ×× ×–×” ××©×ª×œ×, ×•×× ×œ× - ×œ× ×™×ª×›× ×Ÿ ××—×“×© ×•×™××©×™×š ×œ××˜×¨×” ×”××§×•×¨×™×ª

---

## ğŸ”¬ **×××¦××™ ×”××—×§×¨**

### **×”×©×•×•××ª ×‘×™×¦×•×¢×™× ×¦×¤×•×™×”:**

| ×ª×¨×—×™×© | ××œ×’×•×¨×™×ª× A (×¢×™×•×•×¨) | ××œ×’×•×¨×™×ª× B (×˜×™×¤×©) | ××œ×’×•×¨×™×ª× C (×—×›×) | ××œ×’×•×¨×™×ª× D (××ª××˜×™) |
|--------|-------------------|-------------------|------------------|-------------------|
| **SCENARIO_1** (×¢×¥) | ×¢×œ×•×ª × ××•×›×” | ×¢×œ×•×ª ×’×‘×•×”×” (×ª×›× ×•×Ÿ ××™×•×ª×¨) | ×¢×œ×•×ª × ××•×›×” | ×¢×œ×•×ª × ××•×›×” |
| **SCENARIO_2** (×§×¦×‘) | ××¤×¡×¤×¡ ×”×–×“×× ×•×ª | ×ª×›× ×•×Ÿ ××™×•×ª×¨ | ××¤×¡×¤×¡ × ×›×•×Ÿ | ××¤×¡×¤×¡ × ×›×•×Ÿ |
| **SCENARIO_3** (×¨×—×•×§) | ××¤×¡×¤×¡ ×”×–×“×× ×•×ª | ×ª×›× ×•×Ÿ ××™×•×ª×¨ | ×©×•×§×œ ×•××•×•×ª×¨ | ××•×•×ª×¨ ×œ×¤×™ × ×•×¡×—×” |
| **SCENARIO_4** (×§×¨×•×‘) | ××¤×¡×¤×¡ ×”×–×“×× ×•×ª | ×× ×¦×œ ×”×™×˜×‘ | ×× ×¦×œ ×”×™×˜×‘ | ×× ×¦×œ ×”×™×˜×‘ |

### **××¡×§× ×•×ª ××¨×›×–×™×•×ª:**
- âœ… **××œ×’×•×¨×™×ª× C (×—×›×)**: ×××–×Ÿ ××•×©×œ× ×‘×™×Ÿ ×™×¢×™×œ×•×ª ×œ×‘×™× ×”
- âœ… **××œ×’×•×¨×™×ª× B (×˜×™×¤×©)**: ×‘×–×‘×–×Ÿ ×‘××©××‘×™× ××‘×œ ××£ ×¤×¢× ×œ× ××¤×¡×¤×¡
- âœ… **××œ×’×•×¨×™×ª× A (×¢×™×•×•×¨)**: ×™×¢×™×œ ××‘×œ ×¤×¡×™××™
- âœ… **××œ×’×•×¨×™×ª× D (××ª××˜×™)**: ×¤×©×¨×” ×˜×•×‘×” ×œ×œ× ×¢×œ×•×ª LLM

---

## ğŸ—ï¸ **××¨×›×™×˜×§×˜×•×¨×” ×˜×›× ×™×ª**

### **LLM-Modulo Architecture**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MiniGrid      â”‚ -> â”‚   Python Core   â”‚ -> â”‚     LLM         â”‚
â”‚   Environment   â”‚    â”‚   (Planning)    â”‚    â”‚   (Reasoning)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†‘                       â†‘                       â†‘
    Visual Input        Technical Logic        Strategic AI
```

- **LLM Role**: ×”×—×œ×˜×•×ª ××¡×˜×¨×˜×’×™×•×ª ×‘×¨××” ×’×‘×•×”×” (JSON output ×‘×œ×‘×“)
- **Python Role**: ×× ×™×¤×•×œ×¦×™×” ×˜×›× ×™×ª ×©×œ PDDL ×•×ª×›× ×•×Ÿ
- **×ª×•×¦××”**: ××¢×¨×›×ª ×¨×•×‘×¡×˜×™×ª ×¢× ×”×¤×¨×“×” ×‘×¨×•×¨×”

### **×–×¨×™××ª ×”× ×ª×•× ×™× ×”××œ××”**
```
1. ×¡×•×›×Ÿ ×–×– ×‘×¡×‘×™×‘×” -> 2. ××–×”×” ××•×‘×™×™×§×˜ ×—×“×© -> 3. LLM ×× ×ª×— ××ª ×”××•×‘×™×™×§×˜
     â†“                        â†“                        â†“
4. ×”×—×œ×˜×” ××¡×˜×¨×˜×’×™×ª -> 5. ×¢×“×›×•×Ÿ ××¦×‘ PDDL -> 6. ×ª×›× ×•×Ÿ ××—×“×©
     â†“                        â†“                        â†“
7. ×ª×¨×’×•× ×œ×¤×¢×•×œ×•×ª -> 8. ×‘×™×¦×•×¢ MiniGrid -> 9. ×œ×•×’×™× ×’ ×•× ×™×ª×•×—
```

---

## ğŸ“ **××‘× ×” ×”×§×‘×¦×™× ×”××œ×**

```
/Users/ronberger/Desktop/replaning/
â”œâ”€â”€ run_live_dashboard.py      # ğŸ¯ ×× ×”×œ ×”×¡×™××•×œ×¦×™×” ×”×¨××©×™
â”œâ”€â”€ custom_env.py              # ğŸ  ×”×¡×‘×™×‘×” ×”×•×•×™×¨×˜×•××œ×™×ª (MiniGrid)
â”œâ”€â”€ simulation_engine.py       # âš™ï¸ ×× ×•×¢ ×”×ª×¨×’×•× PDDL->MiniGrid
â”œâ”€â”€ llm_reasoner.py            # ğŸ§  ×”×× ×ª×— ×”×—×›× (Gemini API)
â”œâ”€â”€ scenarios.py               # ğŸ“‹ ×”×’×“×¨×ª 4 ×”×ª×¨×—×™×©×™×
â”œâ”€â”€ stores_database.py         # ğŸª ××¡×“ 16 ×—× ×•×™×•×ª ×××™×ª×™×•×ª
â”œâ”€â”€ state_manager.py           # ğŸ’¾ ×× ×”×œ ×”×™×“×¢ ×”×“×™× ××™
â”œâ”€â”€ pddl_patcher.py            # ğŸ”§ ××ª×§×Ÿ ×§×‘×¦×™ PDDL
â”œâ”€â”€ results_logger.py          # ğŸ“Š ××ª×¢×“ ×ª×•×¦××•×ª ×œ-CSV
â”œâ”€â”€ utils/logger.py            # ğŸ“ ××¢×¨×›×ª ×œ×•×’×™× ×’ ××¨×›×–×™×ª
â”œâ”€â”€ run_batch_experiments.sh   # ğŸ”„ ×”×¨×¦×” ××•×˜×•××˜×™×ª ×©×œ 16 × ×™×¡×•×™×™×
â”œâ”€â”€ run_single_algorithm.py    # ğŸ‘¤ ×”×¨×¦×ª ××œ×’×•×¨×™×ª× ×‘×•×“×“ ×œ×‘×•×“×§ ×—×™×¦×•× ×™
â”œâ”€â”€ generate_experiment_graphs.py # ğŸ“ˆ ×™×¦×™×¨×ª ×’×¨×¤×™× ×•× ×™×ª×•×—
â”œâ”€â”€ domain.pddl                # ğŸ¯ ×”×’×“×¨×ª ×ª×—×•× ×”×ª×›× ×•×Ÿ
â”œâ”€â”€ problem_initial.pddl       # ğŸª ×‘×¢×™×™×ª ×”×”×ª×—×œ×”
â”œâ”€â”€ experiment_results.csv     # ğŸ“Š ×ª×•×¦××•×ª ×”× ×™×¡×•×™×™×
â”œâ”€â”€ trace.log                  # ğŸ“‹ ×œ×•×’ ××¤×•×¨×˜ ×©×œ ×”×¨×¦×•×ª
â””â”€â”€ README.md                  # ğŸ“– ××¡××š ×–×”
```

---

## ğŸ¯ **×”×©×¤×¢×” ××—×§×¨×™×ª**

×¢×‘×•×“×” ×–×• ××“×’×™××” ×©**LLM ×™×›×•×œ ×œ×©××© ×›×™×•×¢×¥ ××¡×˜×¨×˜×’×™ ×™×¢×™×œ ×‘××¢×¨×›×•×ª ×ª×›× ×•×Ÿ ××•×˜×•× ×•××™×•×ª**, ××§×‘×œ ×”×—×œ×˜×•×ª ×—×›××•×ª ××ª×™ ×ª×›× ×•×Ÿ ××—×“×© ×›×œ×›×œ×™ ××•×¦×“×§.

×”××¢×¨×›×ª ××¡×¤×§×ª:
- **ğŸ¯ ×“×™×•×§ ××“×¢×™**: × ×™×¡×•×™×™× ××‘×•×§×¨×™× ×¢× ×ª×•×¦××•×ª ××“×™×“×•×ª
- **ğŸ­ ××•×›× ×•×ª ×œ×™×™×¦×•×¨**: ×™×›×•×œ×•×ª ×ª×¦×¤×™×ª ×•×”×“×‘×’×” ××œ××•×ª
- **ğŸ” ×©×§×™×¤×•×ª ××—×§×¨×™×ª**: ×œ×•×’×™× ××œ××™×, ×•×™×–×•××œ×™×–×¦×™×•×ª, ××ª×•×“×•×œ×•×’×™×” ×—×•×–×¨×ª

## ğŸ¤ **××™×š ×œ×ª×¨×•×**

1. **×”×¨×¥ × ×™×¡×•×™×™×** ×¢× ×¤×¨××˜×¨×™× ×©×•× ×™×
2. **×”×©×•×•×” ××œ×’×•×¨×™×ª××™×** ×¢×œ ×ª×¨×—×™×©×™× ×—×“×©×™×
3. **×”×¨×—×‘ ××ª ××¡×“ ×”×—× ×•×™×•×ª** ×¢× ×¢×¨×™×/××“×™× ×•×ª × ×•×¡×¤×•×ª
4. **×©×¤×¨ ××ª ×”×œ×•×’×™×§×”** ×©×œ ×ª×¨×’×•× PDDL->MiniGrid
5. **×”×•×¡×£ ××“×“×™ ×‘×™×¦×•×¢×™×** ×—×“×©×™×

---

**ğŸš€ ×”×›×œ×™ ×”×–×” ×××¤×©×¨ ×œ×š ×œ×¨××•×ª ×‘×“×™×•×§ ××™×š AI ×—×•×©×‘, ××’×œ×” ×•××ª××™× ××ª ×¢×¦××• ×‘×–××Ÿ ×××ª!** ğŸ®âœ¨

# ğŸ”¬ Latest Batch Results (run_batch_experiments.sh)
*(Single run per scenario/algorithm; shared seed per scenario. Scenario-only, no random stores, full sensor radius.)*

## âœ… What Each Scenario Tests
- **SCENARIO_1**: irrelevant noise (object that is not a milk store)
- **SCENARIO_2**: relevant-but-wrong store (butcher shop, no milk)
- **SCENARIO_3**: cheap but far (tests costâ€“distance tradeoff)
- **SCENARIO_4**: close + reasonable price (should replan)
- **SCENARIO_5**: expensive trap (should ignore)

## ğŸ“‘ Results by Scenario

### SCENARIO_1
| Algorithm | Steps | Cost | Time (s) | Replans | LLM Calls | Final Price | Victory |
|-----------|-------|------|----------|---------|-----------|-------------|---------|
| A | 37 | 37.00 | 5.483 | 0 | 0 | 4.00 | True |
| B | 37 | 37.00 | 5.434 | 0 | 0 | 4.00 | True |
| C | 37 | 37.00 | 5.831 | 0 | 0 | 4.00 | True |
| D | 37 | 37.00 | 5.454 | 0 | 0 | 4.00 | True |

### SCENARIO_2
| Algorithm | Steps | Cost | Time (s) | Replans | LLM Calls | Final Price | Victory |
|-----------|-------|------|----------|---------|-----------|-------------|---------|
| A | 37 | 37.00 | 5.908 | 0 | 0 | 4.00 | True |
| B | 37 | 37.00 | 5.379 | 0 | 0 | 4.00 | True |
| C | 37 | 37.00 | 5.505 | 0 | 0 | 4.00 | True |
| D | 37 | 37.00 | 5.874 | 0 | 0 | 4.00 | True |

### SCENARIO_3
| Algorithm | Steps | Cost | Time (s) | Replans | LLM Calls | Final Price | Victory |
|-----------|-------|------|----------|---------|-----------|-------------|---------|
| A | 37 | 37.00 | 5.557 | 0 | 0 | 4.00 | True |
| B | 16 | 16.00 | 3.702 | 1 | 0 | 2.50 | True |
| C | 16 | 16.00 | 4.169 | 1 | 0 | 2.50 | True |
| D | 37 | 37.00 | 5.475 | 0 | 0 | 4.00 | True |

### SCENARIO_4
| Algorithm | Steps | Cost | Time (s) | Replans | LLM Calls | Final Price | Victory |
|-----------|-------|------|----------|---------|-----------|-------------|---------|
| A | 37 | 37.00 | 5.552 | 0 | 0 | 4.00 | True |
| B | 6 | 6.00 | 2.406 | 1 | 0 | 3.50 | True |
| C | 6 | 6.00 | 2.393 | 1 | 0 | 3.50 | True |
| D | 37 | 37.00 | 5.472 | 0 | 0 | 4.00 | True |

### SCENARIO_5
| Algorithm | Steps | Cost | Time (s) | Replans | LLM Calls | Final Price | Victory |
|-----------|-------|------|----------|---------|-----------|-------------|---------|
| A | 21 | 21.00 | 4.043 | 0 | 0 | 4.00 | True |
| B | 10 | 10.00 | 3.567 | 1 | 0 | 12.00 | True |
| C | 21 | 21.00 | 3.780 | 0 | 0 | 4.00 | True |
| D | 21 | 21.00 | 4.034 | 0 | 0 | 4.00 | True |